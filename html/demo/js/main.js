;window.Modernizr=function(a,b,c){function y(a){j.cssText=a}function z(a,b){return y(m.join(a+";")+(b||""))}function A(a,b){return typeof a===b}function B(a,b){return!!~(""+a).indexOf(b)}function C(a,b){for(var d in a){var e=a[d];if(!B(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function D(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:A(f,"function")?f.bind(d||b):f}return!1}function E(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return A(b,"string")||A(b,"undefined")?C(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),D(e,b,c))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w={}.hasOwnProperty,x;!A(w,"undefined")&&!A(w.call,"undefined")?x=function(a,b){return w.call(a,b)}:x=function(a,b){return b in a&&A(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},q.backgroundsize=function(){return E("backgroundSize")},q.opacity=function(){return z("opacity:.55"),/^0.55$/.test(j.opacity)},q.cssanimations=function(){return E("animationName")},q.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return y((a+"-webkit- ".split(" ").join(b+a)+m.join(c+a)).slice(0,-a.length)),B(j.backgroundImage,"gradient")},q.csstransitions=function(){return E("transition")};for(var F in q)x(q,F)&&(v=F.toLowerCase(),e[v]=q[F](),t.push((e[v]?"":"no-")+v));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)x(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},y(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return C([a])},e.testAllProps=E,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document);(function($,k,m,i,d){var e=$(i),g="waypoint.reached",b=function(o,n){o.element.trigger(g,n);if(o.options.triggerOnce){o.element[k]("destroy")}},h=function(p,o){if(!o){return-1}var n=o.waypoints.length-1;while(n>=0&&o.waypoints[n].element[0]!==p[0]){n-=1}return n},f=[],l=function(n){$.extend(this,{element:$(n),oldScroll:0,waypoints:[],didScroll:false,didResize:false,doScroll:$.proxy(function(){var q=this.element.scrollTop(),p=q>this.oldScroll,s=this,r=$.grep(this.waypoints,function(u,t){return p?(u.offset>s.oldScroll&&u.offset<=q):(u.offset<=s.oldScroll&&u.offset>q)}),o=r.length;if(!this.oldScroll||!q){$[m]("refresh")}this.oldScroll=q;if(!o){return}if(!p){r.reverse()}$.each(r,function(u,t){if(t.options.continuous||u===o-1){b(t,[p?"down":"up"])}})},this)});$(n).bind("scroll.waypoints",$.proxy(function(){if(!this.didScroll){this.didScroll=true;i.setTimeout($.proxy(function(){this.doScroll();this.didScroll=false},this),$[m].settings.scrollThrottle)}},this)).bind("resize.waypoints",$.proxy(function(){if(!this.didResize){this.didResize=true;i.setTimeout($.proxy(function(){$[m]("refresh");this.didResize=false},this),$[m].settings.resizeThrottle)}},this));e.load($.proxy(function(){this.doScroll()},this))},j=function(n){var o=null;$.each(f,function(p,q){if(q.element[0]===n){o=q;return false}});return o},c={init:function(o,n){this.each(function(){var u=$.fn[k].defaults.context,q,t=$(this);if(n&&n.context){u=n.context}if(!$.isWindow(u)){u=t.closest(u)[0]}q=j(u);if(!q){q=new l(u);f.push(q)}var p=h(t,q),s=p<0?$.fn[k].defaults:q.waypoints[p].options,r=$.extend({},s,n);r.offset=r.offset==="bottom-in-view"?function(){var v=$.isWindow(u)?$[m]("viewportHeight"):$(u).height();return v-$(this).outerHeight()}:r.offset;if(p<0){q.waypoints.push({element:t,offset:null,options:r})}else{q.waypoints[p].options=r}if(o){t.bind(g,o)}if(n&&n.handler){t.bind(g,n.handler)}});$[m]("refresh");return this},remove:function(){return this.each(function(o,p){var n=$(p);$.each(f,function(r,s){var q=h(n,s);if(q>=0){s.waypoints.splice(q,1);if(!s.waypoints.length){s.element.unbind("scroll.waypoints resize.waypoints");f.splice(r,1)}}})})},destroy:function(){return this.unbind(g)[k]("remove")}},a={refresh:function(){$.each(f,function(r,s){var q=$.isWindow(s.element[0]),n=q?0:s.element.offset().top,p=q?$[m]("viewportHeight"):s.element.height(),o=q?0:s.element.scrollTop();$.each(s.waypoints,function(u,x){if(!x){return}var t=x.options.offset,w=x.offset;if(typeof x.options.offset==="function"){t=x.options.offset.apply(x.element)}else{if(typeof x.options.offset==="string"){var v=parseFloat(x.options.offset);t=x.options.offset.indexOf("%")?Math.ceil(p*(v/100)):v}}x.offset=x.element.offset().top-n+o-t;if(x.options.onlyOnScroll){return}if(w!==null&&s.oldScroll>w&&s.oldScroll<=x.offset){b(x,["up"])}else{if(w!==null&&s.oldScroll<w&&s.oldScroll>=x.offset){b(x,["down"])}else{if(!w&&s.element.scrollTop()>x.offset){b(x,["down"])}}}});s.waypoints.sort(function(u,t){return u.offset-t.offset})})},viewportHeight:function(){return(i.innerHeight?i.innerHeight:e.height())},aggregate:function(){var n=$();$.each(f,function(o,p){$.each(p.waypoints,function(q,r){n=n.add(r.element)})});return n}};$.fn[k]=function(n){if(c[n]){return c[n].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof n==="function"||!n){return c.init.apply(this,arguments)}else{if(typeof n==="object"){return c.init.apply(this,[null,n])}else{$.error("Method "+n+" does not exist on jQuery "+k)}}}};$.fn[k].defaults={continuous:true,offset:0,triggerOnce:false,context:i};$[m]=function(n){if(a[n]){return a[n].apply(this)}else{return a.aggregate()}};$[m].settings={resizeThrottle:200,scrollThrottle:100};e.load(function(){$[m]("refresh")})})(jQuery,"waypoint","waypoints",window);jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});function View(items,opts){var $v,$imgs,$list,$cur,$=jQuery,imgs=[],self=this,$bod=$('body');$v=$('<div class="viewer"><ul></ul><a href="#" class="close" title="Close this viewer">&times;</a></div>').hide();$list=$v.find('ul');var opts=$.extend({css:{'body.viewing':{overflow:'hidden'},'.viewer *, .viewer':{margin:0,padding:0,border:0},'.viewer':{'background-color':'#F00000',filter:'progid:DXImageTransform.Microsoft.gradient(startColorstr=#D8000000,endColorstr=#D8000000)','background-color':'rgba(0,0,0,0.85)',position:'fixed',right:0,top:0,left:0,bottom:0,display:'block',overflow:'hidden','z-index':Math.ceil(new Date().getTime()/10000000),height:'100%',width:'100%'},'.viewer li.current + .loading':{'background-position':'0 center'},'.viewer ul':{display:'block',height:'100%',width:'100%','white-space':'nowrap'},'.viewer li':{height:'100%',width:'0%',overflow:'hidden',display:'none','float':'left','text-align':'center',position:'relative'},'.viewer li.previous, .viewer li.next':{cursor:'pointer',display:'block'},'.viewer li>div':{left:'10px',right:'10px',bottom:'10px',top:'10px',display:'block','text-align':'center',position:'absolute'},'.viewer li.has-caption>div':{bottom:'5em'},'.viewer li.loading>div':{background:'url(data:image/gif;base64,R0lGODlhDAAMAPIGAFxcXE5OTlZWVkpKSkZGRkJCQgAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFHgAGACwAAAAADAAMAAADLmhaIRJFSQHEGFRMQKQhlVFwngIyWqk8lqpgrYs1rvGMXXnapASmPAsm5EHdJAkAIfkEBR4AAQAsBgABAAMABQAAAgaEbwISHAUAIfkEBR4AAQAsBgADAAUAAwAAAgOEj1kAIfkEBR4AAgAsBgAGAAUAAwAAAgYMDmInegUAIfkEBR4AAQAsBgAGAAMABQAAAgOEj1kAIfkEBR4AAgAsAwAGAAMABQAAAgaUchDAzQUAIfkEBR4AAQAsAQAGAAUAAwAAAgOEj1kAIfkEBR4AAgAsAQADAAUAAwAAAgYEImKnGwUAIfkEBR4AAQAsAwABAAMABQAAAgOEj1kAOw%3D%3D) center center no-repeat'},'.viewer li.loading.next>div':{'background-position':'0 center'},'.viewer li.loading.previous>div':{'background-position':'right center'},'.viewer .close':{color:'#fff','text-decoration':'none','font-weight':'bold','font-size':'20px',position:'absolute',right:'15px',top:'15px',cursor:'pointer',display:'block',opacity:0.6},'.viewer .close:hover':{opacity:1},'.viewer img':{'max-width':'100%','max-height':'100%',cursor:'pointer',position:'relative',height:'auto',width:'auto','vertical-align':'middle','-ms-interpolation-mode':'bicubic'},'.viewer .caption':{'color':'#aaa','text-shadow':'0 1px 2px rgba(0,0,0,0.8)','line-height':'5em','position':'absolute','bottom':'0','left':'0','right':'0','visibility':'hidden'},'.viewer li.current .caption':{'visibility':'visible'},'.viewer li.previous':{width:'10%'},'.viewer li.current':{width:'80%',display:'block'},'.viewer li.first.current':{'margin-left':'10%'},'.viewer li.last.current':{'margin-right':'10%'},'.viewer li.next':{width:'10%'},'.viewer li.previous>div':{left:'-50%',right:'50%'},'.viewer li.next>div':{right:'-50%',left:'50%'},'.viewer .next img, .viewer .previous img, .viewer .current img':{'-webkit-transform':'translateZ(0)'}},keys:{close:[27],prev:[37,188],next:[39,190]},loadAhead:1,preload:false,validateUrls:true},opts);this.next=function(){this.show($cur.next().find('img'));};this.prev=function(){this.show($cur.prev().find('img'));};this.close=function(){$v.hide();$(document).unbind('keyup.view');$bod.removeClass('viewing');};this.open=function(){$v.show();$(document).bind('keyup.view',key);$bod.addClass('viewing');this.sync();};this.show=function($img){if(typeof $img=='string'){$img=getImgForUrl($img);}
    if($img.constructor==$&&$img.length>0){$v.find('li').removeClass('current next previous').removeAttr('title');$cur=$parent=$img.parents('li').addClass('current');$cur.next().addClass('next').attr('title','Next');$cur.prev().addClass('previous').attr('title','Previous');this.sync();lazyLoad($cur,opts.loadAhead);}};this.sync=function(){var containerHeight=$list.find('li.current>div').height();var lineHeight=containerHeight+'px';$list.find('li>div>span').each(function(){$(this).css({'line-height':lineHeight});});if(self._ie7){$imgs.css({'max-height':lineHeight});$imgs.each(function(){var $i=$(this);$i.css({top:((containerHeight-$i.height())/2+'px')});});}};this.next=function(){self.show($cur.next().find('img'));};this.prev=function(){self.show($cur.prev().find('img'));};function getImgForUrl(src){var search='[src="'+src+'"],[data-src="'+src+'"]';return $i=$imgs.find(search).add($imgs.filter(search)).eq(0);};function key(e){$.each(opts.keys,function(cmd,keys){for(var k=0;k<keys.length;++k){if(e.keyCode==keys[k]){self[cmd]();}}});};function click(e){e.preventDefault();$t=$(e.target);if($list.find('li').length<=1){self.close();}
    if($t.is('img')){if($t.parents('li').is('.current')){self.next();}else{self.show($t);}}else if($t.is('li>div,li')){if($t.parents('li').is('.next')||$t.is('.next')){self.next();}else if($t.parents('li').is('.previous')||$t.is('.previous')){self.prev();}else{self.close();}}else{self.close();}};function cssify(){var $s=$('<style />');$('head').prepend($s);var s=document.styleSheets[0];for(sel in opts.css){var decs='';for(name in opts.css[sel]){decs+=name+':'+opts.css[sel][name]+';';}
    var selectors=sel.split(",");for(var i=0,sel;sel=selectors[i];++i){if(s.insertRule){s.insertRule((sel+'{'+decs+'}'),s.cssRules.length);}else{s.addRule(sel,decs);}}}};function lazyLoad($pos,loadAhead){load($pos.find('img'));$pos.nextAll().slice(0,loadAhead).add($pos.prevAll().slice(0,loadAhead)).find('img').each(function(i,img){load(img);});};function load(img){if(!img.src){$(img).attr('src',$(img).attr('data-src'));}};function build(){if($.isArray(imgs)){for(var i=0,img;img=imgs[i];++i){var s=null;var $li=$('<li class="loading"/>');if(typeof img=='object'&&img.src){s=img.src;}else if(typeof img=='string'){s=img;}
    var image=new Image();image.onload=function(){self.sync();$(this).css({visibility:'visible'}).parents('li').removeClass('loading');};$(image).css({visibility:'hidden'});$(image).attr('data-src',s);if(img.caption){$li.addClass('has-caption').append($('<span class="caption" />').text(img.caption));}
    if(i==0){$li.addClass('first');}
    if(i==(imgs.length-1)){$li.addClass('last');}
    $list.append($li.append($('<div/>').append($('<span/>').append(image))));}}};function imageLinkClick(e){e.preventDefault();self.show(this.href);self.open();};function isImageUrl(url){return/\.(jpeg|jpg|gif|png)(\?|#)?(.*)?$/ig.test(url);};function process(){if(typeof items=='object'&&items.jquery){items.filter('a[href]').each(function(){if(isImageUrl(this.href)||!opts.validateUrls){imgs.push({src:this.href,caption:this.title});}
    $(this).unbind('click.view').bind('click.view',imageLinkClick);});}else if($.isArray(items)){imgs=items;}};function bind(){$v.unbind('click.view').bind('click.view',click);};function init(){process();build();$imgs=$v.find('img');$('body').append($v);if(!View._cssified){cssify();}
    View._cssified=true;bind();self.sync();self.close();if(opts.preload){self.show($imgs.eq(0));}
    self._ie7=navigator.userAgent.indexOf('MSIE 7')>-1;$(window).resize(function(){self.sync();});};init();};View._version='1.02';(function(){var $=jQuery,s=document.getElementsByTagName('script');$().ready(function(){var $a=$('a.view[href]');var sets={};$a.each(function(){var r=this.rel;if(r){if(!sets[r]){sets[r]=[];}
    sets[r].push(this);}else{new View($(this));}});for(var i in sets){new View($(sets[i]));}});})();var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push(100559295);(function(){var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src='../../../static.getclicky.com/js.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(s);})();;(function(f,h,$){var a='placeholder'in h.createElement('input'),d='placeholder'in h.createElement('textarea'),i=$.fn,c=$.valHooks,k,j;if(a&&d){j=i.placeholder=function(){return this};j.input=j.textarea=true}else{j=i.placeholder=function(){var l=this;l.filter((a?'textarea':':input')+'[placeholder]').not('.placeholder').bind({'focus.placeholder':b,'blur.placeholder':e}).data('placeholder-enabled',true).trigger('blur.placeholder');return l};j.input=a;j.textarea=d;k={get:function(m){var l=$(m);return l.data('placeholder-enabled')&&l.hasClass('placeholder')?'':m.value},set:function(m,n){var l=$(m);if(!l.data('placeholder-enabled')){return m.value=n}if(n==''){m.value=n;if(m!=h.activeElement){e.call(m)}}else{if(l.hasClass('placeholder')){b.call(m,true,n)||(m.value=n)}else{m.value=n}}return l}};a||(c.input=k);d||(c.textarea=k);$(function(){$(h).delegate('form','submit.placeholder',function(){var l=$('.placeholder',this).each(b);setTimeout(function(){l.each(e)},10)})});$(f).bind('beforeunload.placeholder',function(){$('.placeholder').each(function(){this.value=''})})}function g(m){var l={},n=/^jQuery\d+$/;$.each(m.attributes,function(p,o){if(o.specified&&!n.test(o.name)){l[o.name]=o.value}});return l}function b(m,n){var l=this,o=$(l);if(l.value==o.attr('placeholder')&&o.hasClass('placeholder')){if(o.data('placeholder-password')){o=o.hide().next().show().attr('id',o.removeAttr('id').data('placeholder-id'));if(m===true){return o[0].value=n}o.focus()}else{l.value='';o.removeClass('placeholder');l==h.activeElement&&l.select()}}}function e(){var q,l=this,p=$(l),m=p,o=this.id;if(l.value==''){if(l.type=='password'){if(!p.data('placeholder-textinput')){try{q=p.clone().attr({type:'text'})}catch(n){q=$('<input>').attr($.extend(g(this),{type:'text'}))}q.removeAttr('name').data({'placeholder-password':true,'placeholder-id':o}).bind('focus.placeholder',b);p.data({'placeholder-textinput':q,'placeholder-id':o}).before(q)}p=p.removeAttr('id').hide().prev().attr('id',o).show()}p.addClass('placeholder');p[0].value=p.attr('placeholder')}else{p.removeClass('placeholder')}}}(this,document,jQuery));(function($){var validate={required:function(input)
{if(input.val()===undefined||input.val()=="")
    return false;else
    return true;},email:function(input)
{var re=/\S+@\S+\.\S+/;return re.test(input.val());},document:function(input)
{var valid=true;if(input.val()!=""){var file=input[0].files[0];if((file.size/1024)>5000)
    valid=false;switch(file.type)
{case"image/jpeg":break;case"image/gif":break;case"image/png":break;case"application/pdf":break;case"application/msword":break;case"application/vnd.oasis.opendocument.text":break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":break;default:valid=false;}}
    if(!valid)
        input.closest('label').addClass('error').children('span').text('pdf, doc, ods - Invalid type uploaded!');return valid;}};$.fn.validateForm=function()
{var options=$.extend({valid:function(){},invalid:function(){}},arguments[0]||{});if(!this.length)
    return false;$('.form .error').removeClass('error');var formIsValid=true;$('input,textarea').each(function(index){var validInput=true;if($(this).attr("data-validate"))
{var toValidate=$(this).attr("data-validate").split(/\s+/);for(var i=0;i<toValidate.length;i++){if($.isFunction(validate[toValidate[i]]))
    validInput=validate[toValidate[i]]($(this));}}
    if(!validInput){$(this).addClass('error');formIsValid=false;}});if(formIsValid)
    options.valid.call(this);else
    options.invalid.call(this);return this;};})(jQuery);(function($){$.fn.wave=function(options){var settings=$.extend({'colorTop':'#0149bd','colorBottom':'#0149bd','cWidth':this.closest('div').width(),'cHeight':this.closest('div').height(),'forceDivider':300},options);var density=.75;var friction=1.14;var detail=settings.cWidth/4;var particles;var canvas=this.get(0);var context;if(canvas&&canvas.getContext){context=canvas.getContext('2d');particles=[];for(var i=0;i<detail+1;i++){particles.push({x:settings.cWidth/(detail-4)*(i-2),y:settings.cHeight*.4,original:{x:0,y:settings.cHeight*.5},velocity:{x:0,y:Math.random()},tension:{x:0,y:0},force:{x:0,y:0},mass:10});}}
else
{return false;}
    canvas.width=settings.cWidth;canvas.height=settings.cHeight;setInterval(timeUpdate,40);var pulse=false;this.startTwitch=function(){pulse=setInterval(twitch,100);}
    this.stopTwitch=function(){clearTimeout(pulse);}
    this.startTwitch();function twitch(){var forceRange=canvas.height/settings.forceDivider;InsertImpulse(Math.random()*canvas.width,(Math.random()*(forceRange*2)-forceRange));}
    function InsertImpulse(positionX,forceY){var particle=particles[Math.round(positionX/settings.cWidth*particles.length)];if(particle){particle.force.y+=forceY;}}
    function timeUpdate(e){var gradientFill=context.createLinearGradient(settings.cWidth*.5,settings.cHeight*.2,settings.cWidth*.5,settings.cHeight);gradientFill.addColorStop(0,settings.colorBottom);gradientFill.addColorStop(1,settings.colorTop);context.clearRect(0,0,settings.cWidth,settings.cHeight);context.fillStyle=gradientFill;context.beginPath();var len=particles.length;var i;var current,previous,next;for(i=0;i<len;i++){current=particles[i];previous=particles[i-1];next=particles[i+1];if(previous&&next){var forceY=0;var extensionY=0;if(i>0)
    {extensionY=previous.y-current.y-previous.tension.y;forceY+=-density*extensionY;}
        if(i<len-1)
        {extensionY=current.y-next.y-current.tension.y;forceY+=density*extensionY;}
        extensionY=current.y-current.original.y;forceY+=density/15*extensionY;current.tension.y=next.y-current.y;current.velocity.y+=-(forceY/current.mass)+current.force.y;current.velocity.y/=friction;current.force.y/=friction;current.y+=current.velocity.y;var control={x:0,y:0};control.x=previous.x;control.y=previous.y;var anchor={x:0,y:0};anchor.x=previous.x+(current.x-previous.x)/2;anchor.y=previous.y+(current.y-previous.y)/2;context.quadraticCurveTo(control.x,control.y,anchor.x,anchor.y);}}
        context.lineTo(particles[particles.length-1].x,particles[particles.length-1].y);context.lineTo(settings.cWidth,settings.cHeight);context.lineTo(0,settings.cHeight);context.lineTo(particles[0].x,particles[0].y);context.fill();}
    return this;};})(jQuery);(function($){$.fn.heartBeat=function(){var canvas=this.get(0);var context=canvas.getContext('2d');context.lineWidth=3;context.shadowColor='#01CE1C';context.shadowBlur=5;context.strokeStyle='#01CE1C';context.lineJoin='round';var currentPoint=0;var nextPoint=0;var translated=0;points=[];var pointIndex=0;points[pointIndex]={x:0,y:70};pointIndex+=20;points[pointIndex]={x:9,y:70};pointIndex++;points[pointIndex]={x:10,y:64};pointIndex++;points[pointIndex]={x:11,y:60};pointIndex++;points[pointIndex]={x:12,y:64};pointIndex++;points[pointIndex]={x:13,y:74};pointIndex++;points[pointIndex]={x:14,y:79};pointIndex++;points[pointIndex]={x:15,y:76};pointIndex++;points[pointIndex]={x:16,y:67};pointIndex++;points[pointIndex]={x:17,y:60};pointIndex++;points[pointIndex]={x:18,y:62};pointIndex++;points[pointIndex]={x:19,y:71};pointIndex++;points[pointIndex]={x:20,y:119};pointIndex++;points[pointIndex]={x:21,y:112};pointIndex++;points[pointIndex]={x:22,y:99};pointIndex++;points[pointIndex]={x:23,y:81};pointIndex++;points[pointIndex]={x:24,y:61};pointIndex++;points[pointIndex]={x:25,y:42};pointIndex++;points[pointIndex]={x:26,y:28};pointIndex++;points[pointIndex]={x:27,y:20};pointIndex++;points[pointIndex]={x:28,y:21};pointIndex++;points[pointIndex]={x:29,y:28};pointIndex++;points[pointIndex]={x:30,y:51};pointIndex++;points[pointIndex]={x:31,y:63};pointIndex++;points[pointIndex]={x:32,y:79};pointIndex++;points[pointIndex]={x:33,y:89};pointIndex++;points[pointIndex]={x:34,y:87};pointIndex++;points[pointIndex]={x:35,y:75};pointIndex++;points[pointIndex]={x:36,y:59};pointIndex++;points[pointIndex]={x:37,y:50};pointIndex++;points[pointIndex]={x:38,y:53};pointIndex++;points[pointIndex]={x:39,y:65};pointIndex++;points[pointIndex]={x:40,y:70};pointIndex++;points[pointIndex]={x:41,y:70};pointIndex+=80;points[pointIndex]={x:80,y:70};var lastRenderTS=new Date().getTime();var totalTime=0;queueRenderRequest();function queueRenderRequest()
{var renderCallback=function(){render();queueRenderRequest();}
    if(window.requestAnimationFrame)
    {window.requestAnimationFrame(renderCallback);}
    else if(window.msRequestAnimationFrame)
    {window.msRequestAnimationFrame(renderCallbackrender);}
    else if(window.webkitRequestAnimationFrame)
    {window.webkitRequestAnimationFrame(renderCallback);}
    else if(window.mozRequestAnimationFrame)
    {window.mozRequestAnimationFrame(renderCallback);}
    else if(window.oRequestAnimationFrame)
    {window.oRequestAnimationFrame(renderCallback);}
    else
    {setTimeout(renderCallback,1000/60);}}
    function render()
    {var currentTS=new Date().getTime();var dt=(currentTS-lastRenderTS)/1000;renderBeat();lastRenderTS=currentTS;}
    function renderBeat()
    {var position=points[nextPoint];var lastPosition=points[currentPoint]||position;var x=0;var y=position.y;context.beginPath();context.moveTo(x+1,lastPosition.y);context.lineTo(x,position.y);context.closePath();context.stroke();if(points[currentPoint]){nextPoint=currentPoint;}
        context.translate(1,0);translated+=1;totalTime=0;currentPoint++;if(translated>208){currentPoint=0;nextPoint=0;context.translate(-translated,0);translated=0;context.clearRect(0,0,canvas.width,canvas.height);}
        if(currentPoint>points.length)
        {currentPoint=0;nextPoint=0;}}
    return this;};})(jQuery);var stageAdvanceOffset=70;var scrollReminderDelay=10000;var waterEnabled=true;var waterTimerInterval=60;var waterSpeedBase=100;var waterSpeedMultiplier=500;var waterStartDelay=2000;var currentWater=0;var waterTimer=false;var paused=false;var animating=false;var reduceAnimating=false;var canvas=null;var waves=null;var stages={"stage_1":true,"stage_2":false,"stage_3":false,"stage_4":false,"stage_5":false,"stage_6":false,"stage_7":false};var featureFadeIn=1000;var choices={"choice_1":false,"choice_2":false}
var autoChooseWaitTime=5000;var autoChoice=false;var animatingBagDrop=false;var browserHeaderSpeed=500;var browserContentSpeed=300;var browserGrowSpeed=500;var bulbRiseSpeed=3000;var bulbWater=false;var bulbWaterLarge=false;var animateLogo=false;var bugWalk=false;var heart=false;var heartEnabled=true;var formulaEnabled=true;$(document).ready(function(){if($('div.chem_set').length){checkForStopCondition();$(window).resize(function(){checkForStopCondition(true);oddFix();});oddFix();$('#stage_1 div.feature').addClass('show');animateStartLogo();if(waterEnabled){setTimeout(function(){if(!stages.stage_2)
    $('#scroll_reminder').fadeIn(featureFadeIn);},scrollReminderDelay);}
    setUpWaypoints();$('a.choice').click(function(e){e.preventDefault();if(!$(this).hasClass('stop'))
    {var choiceRaw=$(this).attr('id').split("_");var choiceId=choiceRaw[1];var choice=choiceRaw[2];$(this).addClass('chosen');choices['choice_'+choiceId]=choice;$('#stage_6 a.choice').fadeOut();$('#stage_6 #laptop_'+choice+' .browser').animate({height:"0px",width:"0px"},browserGrowSpeed,function(){$('#stage_6 #laptop_'+choice+' .chosen').fadeIn();});var otherChoice=1;if(choice==1)
        otherChoice=2;$('#stage_6 #laptop_'+otherChoice+' .fade').animate({opacity:"1"},1000);$('div.water[data-choiceid='+choiceId+'][data-choice='+choice+']').removeAttr('data-choice');paused=false;if(!autoChoice)
        logClicky('#home/split_'+choice,'Split chose '+choice);else
        logClicky('#home/split_auto_'+choice,'Split auto chose '+choice);$.ajax({url:appPath+'ajax.php',type:'POST',dataType:'json',data:'a=ab&choice='+choice});}});if(waterEnabled)
    {setTimeout(function(){startWater();},waterStartDelay);}}});function oddFix()
{if($('div.chem_set').length)
{if(navigator.userAgent.indexOf("Firefox")!=-1){if(navigator.platform!="MacIntel"&&navigator.platform!="MacPPC"){return false;}}else{return false;}
    width=window.innerWidth;if(width%2==0)
    $('article.home').addClass('ff_osx_fix');else
    $('article.home').removeClass('ff_osx_fix');}}
function setUpWaypoints()
{$('div.chem_stage').each(function(index){var stage=$(this).attr('id');var stageId=stage.split("_");if(stageId[1]!=1)
{$(this).waypoint(function(event){if(!stages[stage])
{$('#'+stage+' div.feature').fadeIn(featureFadeIn);stages[stage]=true;paused=false;if(stage=="stage_7")
    logClicky('#home/'+stage,'Reached end of homepage');if($.isFunction(window[stage]))
    window[stage]();}},{offset:stageAdvanceOffset+'%'});}});}
function checkForStopCondition(resized)
{var resizedBrowser=(resized===undefined)?false:true;if($(window).width()<1011||!Modernizr.canvas||isMobile())
{paused=true;waterEnabled=false;clearInterval(waterTimer);clearInterval(bugWalk);heartEnabled=false;$('#heart').remove();formulaEnabled=false;$('div.formula').hide();if(animateLogo)
    animateLogo.stopTwitch();if(bulbWater)
    bulbWater.stopTwitch();if(bulbWaterLarge)
    bulbWaterLarge.stopTwitch();}
else
{if(resizedBrowser&&!waterEnabled)
{$('div.water').each(function(index)
{if($(this).hasClass('y')){$(this).height('0%');}else{$(this).width('0%');}});paused=false
    waterEnabled=true;currentWater=0;stages={"stage_1":true,"stage_2":false,"stage_3":false,"stage_4":false,"stage_5":false,"stage_6":false};heartEnabled=true;$('#stage_5').append('<canvas id="heart" data-jsfunction="startHeartBeat"></canvas>');heart=$('#heart').heartBeat();formulaEnabled=true;$('div.formula').show();$('#bulb').css('top','380px');$('#bulb_large').css('top','77px');$('#scroll_reminder').hide();$('#bag_browser_front').hide().css('top','-294px');$('#bag_browser_middle').hide().css('top','-283px');$('#bag_browser_back').hide().css('top','-265px');$('.activated').removeClass('activated');$('#stage_3 .browser').css('width','0px').css('height','0px');$('#imac_browser').css('width','0px').css('height','0px').hide();$('#imac').css('background','#E9E9E9');$('div.browser_content').css('top','115px');$('div.browser_header').css('top','22px').css('left','-12px');$('#ipad, #ipad_mini, #iphone').addClass('loading').css('background','#e9e9e9 url('+appPath+'public/img/backgrounds/chem_set/boot.gif) no-repeat center center');if(animateLogo)
    animateLogo.startTwitch();if(bulbWater)
    bulbWater.startTwitch();if(bulbWaterLarge)
    bulbWaterLarge.startTwitch();setTimeout(function(){startWater();},waterStartDelay);}}}
function animateStartLogo()
{if(waterEnabled){setTimeout(function(){animateLogo=$('#logo_animated canvas').wave({'colorTop':'#eb1163','colorBottom':'#eb1163','cWidth':$('#logo_animated canvas').width(),'cHeight':$('#logo_animated canvas').height()});},500);}}
function startWater()
{waterTimer=setInterval(function(){if(!paused&&!animating)
{animateWater(currentWater);}},waterTimerInterval);}
function animateMacBrowser()
{$('#imac .boot').fadeOut(function(){$('#imac').css('background','#C7E8FB');setTimeout(function(){$('#imac_browser').show();$('#imac_browser').animate({width:"+=180px",height:"+=112px"},browserGrowSpeed,function(){$('#imac_browser div.browser_header').animate({left:"39px",width:"102px"},browserHeaderSpeed,function(){animateMacBrowserContent(0,69);});});},1000);if(!bulbWater){bulbWater=$('#bulb canvas').wave({'colorTop':'#f05c93','colorBottom':'#f05c93','cWidth':$('#logo_animated canvas').width(),'cHeight':$('#logo_animated canvas').height()});}});}
function animateMacBrowserContent(currentContent,currY)
{var targetBrowserContent=$('#imac_browser div.browser_content').eq(currentContent);if(targetBrowserContent!==undefined)
{targetBrowserContent.animate({top:currY+'px'},browserContentSpeed,function(){currentContent=currentContent+1;if(currentContent%2==0)
    currY+=12;animateMacBrowserContent(currentContent,currY);});}
else
{return false;}}
function animateMobileBrowser(targetContainer,fullWidth,fullHeight)
{$('#'+targetContainer+' .spinner').hide();$('#'+targetContainer).css('background','#FFF');$('#'+targetContainer+' div.browser').animate({width:"+="+fullWidth,height:"+="+fullHeight},browserGrowSpeed);}
function animateBulb()
{$('#bulb').animate({top:"316px"},bulbRiseSpeed);}
function animateBulbLarge()
{if(!bulbWaterLarge){bulbWaterLarge=$('#bulb_large canvas').wave({'colorTop':'#f05c93','colorBottom':'#f05c93','cWidth':$('#bulb_large').width(),'cHeight':$('#bulb_large').height()});}
    $('#bulb_large').animate({top:"-13px"},bulbRiseSpeed);}
function animateTshirtFill()
{$('#bag_browser_front #tshirt_fill').animate({height:"84px"},2000);}
function animateBagDrop()
{var delay=600;if(parseInt($('#bag_browser_front').css('top'),10)<90&&!animatingBagDrop){animatingBagDrop=true;$('#stage_4 .bag_browser').each(function(index){var targetBrowser=$(this);setTimeout(function(){animatingBagDrop=false;targetBrowser.show().animate({top:"+=388px"},700);},delay);delay+=200;});}}
function autoChoose(autoclick)
{if(!choices.choice_1&&!choices.choice_2&&stages.stage_6)
{if(autoclick!==undefined)
{autoChoice=Math.floor((Math.random()*2)+1);$('#choice_1_'+autoChoice).click();}
    setTimeout(function(){autoChoose(true);},autoChooseWaitTime);}
else
{if(choices.choice_1||choices.choice_2)
    return false;setTimeout(function(){autoChoose();},1000);}}
function stage_2()
{setTimeout(function(){$('#imac .boot').fadeIn(2000,function(){$('#imac .boot span').animate({'top':"0px"},500,function(){$('#imac .boot').addClass('loading');$('#ipad').addClass('loading');$('#ipad_mini').addClass('loading');$('#iphone').addClass('loading');});});},1000);$('#scroll_reminder').fadeOut();}
function stage_4()
{animateBagDrop();}
function stage_5()
{
    //$('#bug').attr('src','./public/img/backgrounds/chem_set/stage_5_bug.gif?'+Math.floor((Math.random()*300)+1)).show();
    // if(heartEnabled)
    heart=$('#heart').heartBeat();
}
function stage_6()
{$('#stage_6 a.choice').addClass('ready');}
function stage_7()
{if(formulaEnabled){setTimeout(function(){formula(0);},500);}}
function formula(childIndex)
{var targetElement=$('div.formula').children().eq(childIndex);if(targetElement.hasClass('formula_bond'))
{if(targetElement.hasClass('y')){var options={height:'56px'};}
    if(targetElement.hasClass('angled')){var options={width:'30px'};}
    if(options===undefined){var options={width:'56px'};}
    if(targetElement.hasClass('skip'))
    {childIndex++;formula(childIndex);}
    targetElement.animate(options,'200',function(){childIndex++;formula(childIndex);});}
else
{var fadeSpeed=400;if(targetElement.hasClass('formula_logo'))
    fadeSpeed=2000;targetElement.fadeIn(fadeSpeed,function(){childIndex++;formula(childIndex);});}}
function animateWater()
{var targetWater=$('div.water').eq(currentWater);var nextWater=$('div.water').eq(currentWater+1);var animate=true;if(targetWater!==undefined)
{var stage=targetWater.closest('.chem_stage').attr('id');if(stage===undefined)
{paused=true;return false;}
    if(stages[stage])
    {animating=true;var direction=(targetWater.hasClass('x'))?"width":"height";var tube=targetWater.closest('.tube');distance=(direction=="width")?tube.width():tube.height();var speed=Math.floor((distance/waterSpeedBase)*waterSpeedMultiplier);var options={};options[direction]="+=100%";var properties={duration:speed,easing:'linear',queue:false,complete:function(){targetWater.data("finished","true");currentWater=currentWater+1;animating=false;}};if(targetWater.data("activates")!==undefined)
    {var getTargetFeature=targetWater.data("activates").split("-");var targetFeature=$('#'+getTargetFeature[0]);properties['step']=function(now,fx){if(Math.floor(now)>=parseInt(getTargetFeature[1])&&!targetFeature.hasClass('activated'))
    {targetFeature.addClass('activated');if(targetFeature.data("jsfunction")!==undefined)
    {if(targetFeature.data("fullwidth")!==undefined)
    {fullWidth=targetFeature.data("fullwidth");fullHeight=targetFeature.data("fullheight");window[targetFeature.data("jsfunction")](targetFeature.attr('id'),fullWidth,fullHeight);}
        window[targetFeature.data("jsfunction")]();}}};}
        if(targetWater.attr("data-joint")!==undefined)
            nextWater.animate(options,properties);if(targetWater.attr("data-choiceid")!==undefined)
    {if(targetWater.attr("data-choice")!==undefined)
    {if(nextWater.attr("data-choice")==undefined)
    {currentWater=currentWater+1;}
    else
    {paused=true;}
        animate=false;animating=false;}
        if(targetWater.attr("data-chosen")!==undefined&&targetWater.attr("data-chosen")!=choices['choice_'+targetWater.attr("data-choiceid")])
        {currentWater=currentWater+1;animate=false;animating=false;}}
        if(animate)
            targetWater.animate(options,properties);}
    else
    {paused=true;}}
else
{return false;}}
function siMap()
{this.map=null;this.markers=[];this.zoom=17;this.mobileLocation=false;this.sideLat=34.05138;this.sideLng=-118.25405;this.realLat=34.05138;this.realLng=-118.25405;this.enterLat=34.05138;this.enterLong=-118.25405;this.directions=false;this.realCenter=new google.maps.LatLng(this.realLat,this.realLng);this.sideCenter=new google.maps.LatLng(this.sideLat,this.sideLng);this.enterCenter=new google.maps.LatLng(this.enterLat,this.enterLong);this.setupMap();var controller=this;google.maps.event.addDomListener(window,'resize',function(){controller.centerMap();});if(!navigator.geolocation){$('#gps').hide();}
    $('#gps').click(function(e){e.preventDefault();controller.getMobilePos();logClicky('#contact/map_gps','Clicked GPS button');});}
siMap.prototype.centerMap=function(lat,lng)
{if(!this.directions){if($(window).width()<490)
{this.map.setCenter(this.realCenter);this.markers.siOffice.setIcon(appPath+'public/img/icons/logo_marker_small.png');}
    if($(window).width()>490&&$(window).width()<740)
    {this.map.setCenter(this.realCenter);this.markers.siOffice.setIcon(appPath+'public/img/icons/logo_marker.png');}
    if($(window).width()>740)
    {this.map.setCenter(this.sideCenter);this.markers.siOffice.setIcon(appPath+'public/img/icons/logo_marker.png');}}}
siMap.prototype.getMobilePos=function()
{var controller=this;if(navigator.geolocation){browserSupportFlag=true;navigator.geolocation.getCurrentPosition(function(position){controller.mobileLocation=position.coords.latitude+','+position.coords.longitude;controller.getDirections($('#directions_mobile'));},function(){alert('Sorry we failed to get your location, try a postcode instead');});}
else{alert('Sorry your device doesn\'t support that');}}
siMap.prototype.getDirections=function(parent)
{var controller=this;var formattedAddress='';var homeLat;var homeLng;var geocoder=new google.maps.Geocoder();this.directions=true;if(this.markers.home!==undefined)
    this.markers.home.setMap(null);var mobile=(parent.attr('id')!="directions_mobile")?false:true;var postcode=parent.find('input[name="postcode"]').val();if(controller.mobileLocation){postcode=controller.mobileLocation;}
    logClicky('#contact/map_directions','Clicked get directions from '+postcode);geocoder.geocode({'address':postcode},function(results,status)
{if(status==google.maps.GeocoderStatus.OK)
{homeLat=results[0].geometry.location.lat();homeLng=results[0].geometry.location.lng();formattedAddress=results[0].formatted_address;var info={'lat':homeLat,'lng':homeLng,'hoverTitle':'You!','icon':appPath+'public/img/icons/marker_start.png'}
    controller.markers.home=new siMarker(controller,info);var rendererOptions={hideRouteList:true,suppressInfoWindows:true,suppressMarkers:true,polylineOptions:{strokeColor:'#ed1165',strokeOpacity:0.8,strokeWeight:6}};var directionsDisplay=new google.maps.DirectionsRenderer(rendererOptions);var directionsService=new google.maps.DirectionsService();directionsDisplay.setMap(controller.map);if(!mobile){var animOptions={'bottom':"10%",'top':"10%",'left':'50px','margin-left':'0px','width':"309px"}}else{var animOptions={};}
    parent.addClass('active').html('<div class="directions_start" class="single">Calculating...</div><div class="directions_stats"></div><div class="directions_list"></div>').animate(animOptions,500,'linear',function(){controller.markers.siOffice.setIcon(appPath+'public/img/icons/marker_end.png');controller.markers.siOffice.setPosition(controller.enterCenter);var request={origin:controller.markers.home.position,destination:controller.markers.siOffice.position,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:google.maps.DirectionsUnitSystem.IMPERIAL};directionsService.route(request,function(response,status){if(status==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(response);if(formattedAddress.length>27)
        parent.find('.directions_start').removeClass('single');var startAddress=(formattedAddress.length>45)?formattedAddress.substring(0,45)+'...':formattedAddress;parent.find('.directions_start').html(startAddress);parent.find('.directions_stats').html(response.routes[0].legs[0].distance.text+' - about '+response.routes[0].legs[0].duration.text);for(i=0;i<response.routes[0].legs[0].steps.length;i++){var curStep=i+1;var alt=(curStep%2==0)?'alt':'';parent.find('.directions_list').append('<div class="group '+alt+'"><span class="step">'+curStep+'</span><span class="instructions">'+response.routes[0].legs[0].steps[i].instructions+'</span><span class="distance">'+response.routes[0].legs[0].steps[i].distance.text+'</span></div>');}
        curStep++;alt=(curStep%2==0)?'alt':'';parent.find('.directions_list').append('<div class="group '+alt+'"><span class="step">'+curStep+'</span><span class="instructions">The office is through the gates at the back of the building</span><span class="distance end"><img src="'+appPath+'public/img/icons/marker_end.png"></span></div>');if(!mobile){setTimeout(function(){controller.map.panBy(-100,0);},1000);}
        else{window.scrollTo(0,0);}}});});}else{alert('Sorry we could not find that postcode!');$('#postcode').focus().select();return false;}});}
siMap.prototype.setupMap=function()
{this.map=new google.maps.Map($('div#map').get(0),{zoom:this.zoom,center:this.sideCenter,width:'100%',height:'100%',scaleControl:false,scrollwheel:false,panControl:false,overViewControl:false,overviewMapControl:false});this.setupCustomMapStyle();var info={'lat':this.realLat,'lng':this.realLng,'hoverTitle':'Si Secret Base','icon':appPath+'public/img/icons/logo_marker.png'}
    var controller=this;setTimeout(function(){controller.markers.siOffice=new siMarker(controller,info);controller.centerMap();},2000);};siMap.prototype.setupCustomMapStyle=function()
{var style=[{featureType:"transit.station.airport",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]}];this.map.mapTypes.set("Minimal",new google.maps.StyledMapType(style,{map:this.map,name:"Minimal"}));this.map.setMapTypeId("Minimal");setTimeout(function(){$("a[title='Click to see this area on Google Maps']").remove();$('span:contains("Map data")').remove();$('span:contains(" - ")').remove();$('a:contains("Terms of Use")').remove();$('a:contains("Report a map error")').remove();},2000);};var si={};$(document).ready(function(){if(isMobile()){$('html').addClass('no-canvas');}
    highdpi();$('a.logo2').bind('contextmenu',function(e){if(e.button===2){logClicky('#media/logo','Right clicked logo');direct('media?logo');e.preventDefault();}});$('div.col.third.media').bind('contextmenu',function(e){if(e.button===2){logClicky('#media/inline_download','Trying to download inline media logo');alert('If you download the zip file linked below we provide you with multiple sizes and options');}});$('a.new_tab').live('click',function(e){e.preventDefault();window.open($(this).attr('href'));});$('#nav_dropdown').change(function(){direct($(this).val());});$('a.get_directions').click(function(e){e.preventDefault();si.map.getDirections($(this).closest('div.directions'));});$('#directions input[name="postcode"]').keyup(function(event){if(event.keyCode==13){$("#directions .get_directions").click();}});$('a.blog_back').click(function(e){logClicky('#blog/go_back','Blog back button');});$('article.portfolio div.browser').click(function(e){logClicky('#portfolio/link_attempt','Tried to click a portfolio image');});$('a.download_media_zip').click(function(e){logClicky('#media/download_zip','Downloaded media zip file');});$('input, textarea').placeholder();$('#more_blog_posts').click(function(e){e.preventDefault();var loadMoreButton=$(this);loadMoreButton.addClass('loading').html('<img src="'+appPath+'public/img/icons/blog_loading.gif">');logClicky('#blog_load/total_'+loadMoreButton.attr('data-offset'),'Blog load more ('+loadMoreButton.attr('data-offset')+')');$.ajax({url:appPath+'ajax.php',type:'POST',dataType:'json',data:{'a':'blog','offset':loadMoreButton.attr('data-offset')},success:function(response)
    {if(!response.error)
    {var newOffset=response.offset;loadMoreButton.attr('data-offset',newOffset);$('#blog_posts').append(response.html);}
    else
    {if(response.error==2)
        $('#more_blog_posts').hide();}

        loadMoreButton.removeClass('loading').html('');}});});











    $('.error').blur(function(){$(this).removeClass('error');});if($('#lost_browser').length){setTimeout(function(){$('#lost_browser .avatar').addClass('active').animate({top:'190px'},1500,function(){$('#lost_browser .question').fadeIn(2000);});},2000);}

    console.log('asdf');});function highdpi(){if($('img.x2').css('font-size')=="1px"){var els=$("img.x2").get();for(var i=0;i<els.length;i++){var src=els[i].src;src=src.replace(".png","@2x.png");els[i].src=src;}}}
function progressHandlingFunction(e){if(e.lengthComputable)
    $('progress').attr({value:e.loaded,max:e.total});}
function isMobile(){return((navigator.userAgent.match(/iPad/i)!=null));}
function logClicky(page,action){setTimeout(function(){clicky.log(page,action);},1000);}
function direct(page)
{document.location.href=page;}
function randomNumber(from,to)
{return Math.floor(Math.random()*(to-from+1)+from);}